<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Login Page</title>
    <link rel="stylesheet" href="/css/base.css">
</head>
<body>
    <div class="login_container">
        <div class="wr">
            <form onsubmit="return false">
                <label>ID</label>
                <input id="id" type="text"></br></br>
                <label>PW</label>
                <input id="pwd" type="password"></br></br>
                <input id="signin" type="submit" value="sign in"></br></br></br>
                <button><a href="/register">Sign Up</a></button>
            </form>
        </div>
    </div>
<script th:src="@{/js/jquery.min.js}"></script>
<script>
    $('#signin').click(function () {
        var userData = JSON.stringify({
            id: $('#id').val(),
            pwd: $('#pwd').val()
        });
        $.ajax({
            url: "/login",
            type: "POST",
            data: userData,
            contentType: "application/json",
            dataType: "json",
            success: function () {
                $.ajax({
                    url: "/tdl/user",
                    type: "POST",
                    data: userData,
                    contentType: "application/json",
                    dataType: "json",
                    success: function () {
                        location.href = '/tdl/list';
                    },
                    error: function () {
                        alert("Nope!");
                    }
                });
            },
            error: function () {
                alert('아이디가 틀렸거나 등록된 아이디가 없습니다');
            }
        });
    });
</script>
</body>
</html>